(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],{14:function(e,t,s){},15:function(e,t,s){},18:function(e,t,s){"use strict";s.r(t);var a=s(7),c=s.n(a),n=s(1),r=(s(12),s(13),s(14),s(5)),i=s.n(r),l=(s(15),s(0)),o=function(){return Object(l.jsx)("div",{className:"Loader","data-cy":"Loader",children:Object(l.jsx)("div",{className:"Loader__content"})})},d=function(){return Object(l.jsxs)("form",{"data-cy":"NewCommentForm",children:[Object(l.jsxs)("div",{className:"field","data-cy":"NameField",children:[Object(l.jsx)("label",{className:"label",htmlFor:"comment-author-name",children:"Author Name"}),Object(l.jsxs)("div",{className:"control has-icons-left has-icons-right",children:[Object(l.jsx)("input",{type:"text",name:"name",id:"comment-author-name",placeholder:"Name Surname",className:"input is-danger"}),Object(l.jsx)("span",{className:"icon is-small is-left",children:Object(l.jsx)("i",{className:"fas fa-user"})}),Object(l.jsx)("span",{className:"icon is-small is-right has-text-danger","data-cy":"ErrorIcon",children:Object(l.jsx)("i",{className:"fas fa-exclamation-triangle"})})]}),Object(l.jsx)("p",{className:"help is-danger","data-cy":"ErrorMessage",children:"Name is required"})]}),Object(l.jsxs)("div",{className:"field","data-cy":"EmailField",children:[Object(l.jsx)("label",{className:"label",htmlFor:"comment-author-email",children:"Author Email"}),Object(l.jsxs)("div",{className:"control has-icons-left has-icons-right",children:[Object(l.jsx)("input",{type:"text",name:"email",id:"comment-author-email",placeholder:"email@test.com",className:"input is-danger"}),Object(l.jsx)("span",{className:"icon is-small is-left",children:Object(l.jsx)("i",{className:"fas fa-envelope"})}),Object(l.jsx)("span",{className:"icon is-small is-right has-text-danger","data-cy":"ErrorIcon",children:Object(l.jsx)("i",{className:"fas fa-exclamation-triangle"})})]}),Object(l.jsx)("p",{className:"help is-danger","data-cy":"ErrorMessage",children:"Email is required"})]}),Object(l.jsxs)("div",{className:"field","data-cy":"BodyField",children:[Object(l.jsx)("label",{className:"label",htmlFor:"comment-body",children:"Comment Text"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("textarea",{id:"comment-body",name:"body",placeholder:"Type comment here",className:"textarea is-danger"})}),Object(l.jsx)("p",{className:"help is-danger","data-cy":"ErrorMessage",children:"Enter some text"})]}),Object(l.jsxs)("div",{className:"field is-grouped",children:[Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("button",{type:"submit",className:"button is-link is-loading",children:"Add"})}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("button",{type:"reset",className:"button is-link is-light",children:"Clear"})})]})]})},j=function(){return Object(l.jsx)("div",{className:"content","data-cy":"PostDetails",children:Object(l.jsxs)("div",{className:"content","data-cy":"PostDetails",children:[Object(l.jsxs)("div",{className:"block",children:[Object(l.jsx)("h2",{"data-cy":"PostTitle",children:"#18: voluptate et itaque vero tempora molestiae"}),Object(l.jsx)("p",{"data-cy":"PostBody",children:"eveniet quo quis laborum totam consequatur non dolor ut et est repudiandae est voluptatem vel debitis et magnam"})]}),Object(l.jsxs)("div",{className:"block",children:[Object(l.jsx)(o,{}),Object(l.jsx)("div",{className:"notification is-danger","data-cy":"CommentsError",children:"Something went wrong"}),Object(l.jsx)("p",{className:"title is-4","data-cy":"NoCommentsMessage",children:"No comments yet"}),Object(l.jsx)("p",{className:"title is-4",children:"Comments:"}),Object(l.jsxs)("article",{className:"message is-small","data-cy":"Comment",children:[Object(l.jsxs)("div",{className:"message-header",children:[Object(l.jsx)("a",{href:"mailto:misha@mate.academy","data-cy":"CommentAuthor",children:"Misha Hrynko"}),Object(l.jsx)("button",{"data-cy":"CommentDelete",type:"button",className:"delete is-small","aria-label":"delete",children:"delete button"})]}),Object(l.jsx)("div",{className:"message-body","data-cy":"CommentBody",children:"Some comment"})]}),Object(l.jsxs)("article",{className:"message is-small","data-cy":"Comment",children:[Object(l.jsxs)("div",{className:"message-header",children:[Object(l.jsx)("a",{href:"mailto:misha@mate.academy","data-cy":"CommentAuthor",children:"Misha Hrynko"}),Object(l.jsx)("button",{"data-cy":"CommentDelete",type:"button",className:"delete is-small","aria-label":"delete",children:"delete button"})]}),Object(l.jsx)("div",{className:"message-body","data-cy":"CommentBody",children:"One more comment"})]}),Object(l.jsxs)("article",{className:"message is-small","data-cy":"Comment",children:[Object(l.jsxs)("div",{className:"message-header",children:[Object(l.jsx)("a",{href:"mailto:misha@mate.academy","data-cy":"CommentAuthor",children:"Misha Hrynko"}),Object(l.jsx)("button",{"data-cy":"CommentDelete",type:"button",className:"delete is-small","aria-label":"delete",children:"delete button"})]}),Object(l.jsx)("div",{className:"message-body","data-cy":"CommentBody",children:"Multi\nline\ncomment"})]}),Object(l.jsx)("button",{"data-cy":"WriteCommentButton",type:"button",className:"button is-link",children:"Write a comment"})]}),Object(l.jsx)(d,{})]})})},m=s(4),u=s(3),b=s(2),h=s.n(b),O="https://mate.academy/students-api";function x(e){return new Promise((function(t){setTimeout(t,e)}))}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:t};return s&&(a.body=JSON.stringify(s),a.headers={"Content-Type":"application/json; charset=UTF-8"}),x(300).then((function(){return fetch(O+e,a)})).then((function(e){return e.json()}))}var N=function(e){return p(e)},f=function(){var e=Object(m.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("/users");case 2:return t=e.sent,e.abrupt("return",t||null);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=Object(n.createContext)({users:null,selectedUserName:"Choose a user",selectedUserId:0}),y=Object(n.createContext)({handleUserNameSelection:function(){}}),g=function(e){var t=e.children,s=Object(n.useState)(null),a=Object(u.a)(s,2),c=a[0],r=a[1],i=Object(n.useState)("Choose a user"),o=Object(u.a)(i,2),d=o[0],j=o[1],b=Object(n.useState)(0),O=Object(u.a)(b,2),x=O[0],p=O[1],N=Object(n.useCallback)(Object(m.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f();case 3:t=e.sent,r(t),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Unable load users from server");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),g=Object(n.useCallback)((function(e,t){j((function(){return e})),p((function(){return t}))}),[]);Object(n.useEffect)((function(){N()}),[]);var C={users:c,selectedUserName:d,selectedUserId:x},w={handleUserNameSelection:g};return Object(l.jsx)(v.Provider,{value:C,children:Object(l.jsx)(y.Provider,{value:w,children:t})})},C=function(e){var t=e.names,s=e.selectedUserName,a=e.chooseUser;return Object(l.jsx)("div",{className:"dropdown-menu",id:"dropdown-menu",role:"menu",children:Object(l.jsx)("div",{className:"dropdown-content",children:t&&t.map((function(e,t){var c=e.name===s;return Object(l.jsx)("a",{href:"#user-".concat(t+1),className:i()("dropdown-item",{"is-active":c}),onClick:function(){return a(e.name,e.id)},children:e.name},e.id)}))})})},w=function(e){var t=e.selectedUserName,s=e.handleDropDown;return Object(l.jsx)("div",{className:"dropdown-trigger",children:Object(l.jsxs)("button",{type:"button",className:"button","aria-haspopup":"true","aria-controls":"dropdown-menu",onClick:s,children:[Object(l.jsx)("span",{children:t}),Object(l.jsx)("span",{className:"icon is-small",children:Object(l.jsx)("i",{className:"fas fa-angle-down","aria-hidden":"true"})})]})})},k=function(){var e=Object(n.useContext)(v),t=e.users,s=e.selectedUserName,a=Object(n.useContext)(y).handleUserNameSelection,c=Object(n.useState)(!1),r=Object(u.a)(c,2),i=r[0],o=r[1],d=Object(n.useMemo)((function(){return null===t||void 0===t?void 0:t.map((function(e){return{name:e.name,id:e.id}}))}),[t]),j=Object(n.useCallback)((function(){return o((function(e){return!e}))}),[]),b=Object(n.useCallback)(function(){var e=Object(m.a)(h.a.mark((function e(t,s){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(t,s),o((function(e){return!e}));case 2:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),[]);return Object(l.jsxs)("div",{"data-cy":"UserSelector",className:"dropdown is-active",children:[Object(l.jsx)(w,{handleDropDown:j,selectedUserName:s}),i&&d&&Object(l.jsx)(C,{names:d,selectedUserName:s,chooseUser:b})]})},P=Object(n.createContext)({userPosts:null,isError:!1,isLoading:!1,selectedPostId:0,handlePostSelection:function(){}}),S=function(e){var t=e.children,s=Object(n.useState)(null),a=Object(u.a)(s,2),c=a[0],r=a[1],i=Object(n.useState)(0),o=Object(u.a)(i,2),d=o[0],j=o[1],b=Object(n.useState)(!1),O=Object(u.a)(b,2),x=O[0],p=O[1],f=Object(n.useState)(!1),y=Object(u.a)(f,2),g=y[0],C=y[1],w=Object(n.useContext)(v).selectedUserId,k=Object(n.useCallback)(Object(m.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!1),p(!0),e.prev=2,e.next=5,N("/posts?userId=".concat(w));case 5:t=e.sent,r(t),p(!1),e.next=15;break;case 10:throw e.prev=10,e.t0=e.catch(2),C(!0),p(!1),new Error("Unable load user posts");case 15:case"end":return e.stop()}}),e,null,[[2,10]])}))),[w]),S=Object(n.useCallback)((function(e){return j(e)}),[]);Object(n.useEffect)((function(){0!==w&&k()}),[w]);var U={userPosts:c,isError:g,isLoading:x,selectedPostId:d,handlePostSelection:S};return Object(l.jsx)(P.Provider,{value:U,children:t})},U=function(e){var t=e.post,s=Object(n.useContext)(P),a=s.selectedPostId,c=s.handlePostSelection,r=t.id,o=t.title,d=Object(n.useMemo)((function(){return r===a}),[a]);return Object(l.jsxs)("tr",{"data-cy":"Post",children:[Object(l.jsx)("td",{"data-cy":"PostId",children:r}),Object(l.jsx)("td",{"data-cy":"PostTitle",children:o}),Object(l.jsx)("td",{className:"has-text-right is-vcentered",children:Object(l.jsx)("button",{type:"button","data-cy":"PostButton",className:i()("button is-link",{"is-light":!d}),onClick:function(){c(a===r?0:r)},children:d?"Close":"Open"})})]})},E=function(){var e=Object(n.useContext)(P).userPosts;return Object(l.jsxs)("div",{"data-cy":"PostsList",children:[Object(l.jsx)("p",{className:"title",children:"Posts:"}),Object(l.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable is-narrow",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{className:"has-background-link-light",children:[Object(l.jsx)("th",{children:"#"}),Object(l.jsx)("th",{children:"Title"}),Object(l.jsx)("th",{children:" "})]})}),Object(l.jsx)("tbody",{children:e&&e.map((function(e){return Object(l.jsx)(U,{post:e},e.id)}))})]})]})},M=function(){return Object(l.jsx)("div",{className:"notification is-warning","data-cy":"NoPostsYet",children:"No posts yet"})},I=function(){return Object(l.jsx)("div",{className:"notification is-danger","data-cy":"PostsLoadingError",children:"Something went wrong!"})},D=function(){var e=Object(n.useContext)(v).selectedUserName,t=Object(n.useContext)(P),s=t.isError,a=t.userPosts,c=t.isLoading,r=Object(n.useMemo)((function(){return"Choose a user"===e}),[e]),i=Object(n.useMemo)((function(){return 0===(null===a||void 0===a?void 0:a.length)&&!r&&!c}),[a,c]),d=Object(n.useMemo)((function(){return 0!==(null===a||void 0===a?void 0:a.length)&&!r&&!c}),[a,c]);return Object(l.jsxs)("div",{className:"block","data-cy":"MainContent",children:[r&&Object(l.jsx)("p",{"data-cy":"NoSelectedUser",children:"No user selected"}),c&&Object(l.jsx)(o,{}),s&&Object(l.jsx)(I,{}),i&&Object(l.jsx)(M,{}),d&&Object(l.jsx)(E,{})]})},T=function(){return Object(l.jsx)("main",{className:"section",children:Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("div",{className:"tile is-ancestor",children:[Object(l.jsx)("div",{className:"tile is-parent",children:Object(l.jsx)("div",{className:"tile is-child box is-success",children:Object(l.jsxs)(S,{children:[Object(l.jsx)("div",{className:"block",children:Object(l.jsx)(k,{})}),Object(l.jsx)(D,{})]})})}),Object(l.jsx)("div",{"data-cy":"Sidebar",className:i()("tile","is-parent","is-8-desktop","Sidebar","Sidebar--open"),children:Object(l.jsx)("div",{className:"tile is-child box is-success ",children:Object(l.jsx)(j,{})})})]})})})};c.a.render(Object(l.jsx)(g,{children:Object(l.jsx)(T,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.dfc039b4.chunk.js.map